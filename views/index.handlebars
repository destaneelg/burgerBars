<div> 
    <div class="col-md-12">
        <h1>BurgerBars</h1>
        <img src="../public/assets/img/burger.jpeg">
     </div>
    <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-12 column">
        <ul>
            {{#each burgers}}
            <li>
                {{#unless devoured}}
                {{this.id}}. {{this.name}}
                <button class="devour btn btn-warning btn-sm" data-id="{{this.id}}">
                        Eat your burger
                </button>
                {{/unless}}
                </li>
                {{/each}}
        </ul>
        </div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-12 column">

        <form class="create-form">
            <div class="form-group">
                <input type="text" id="burger-name" name="name">
            </div>
            <button type="submit" id="add-burger" class="btn btn-warning btn-lg btn-block">Submit</button>
        </form>
        <h3>Add A Burger!</h3>
    </div>

        <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-xs-12 column">
            <ul>
                {{#each burgers}}
                <li>
                    {{#if devoured}}
                    {{this.id}}. {{this.name}}
                    {{/if}}
                </li>
                {{/each}}
            </ul>

        </div>

</div>


<script>
  $(document).ready(function() {
    $("#add-burger").on("click", function(event) {
        event.preventDefault();
        var burger = {
            burger_name: $("#burger-name").val().trim()
        };
        $.ajax("/api/burger", {
        type: "POST",
        data: burger
        }).then(function() {
          location.reload();
        }
        );
    });
    $(".devour").on("click", function(event) {
      var id = $(this).data("id");

      var devouredBurger = {
        id: id
      };
      $.ajax("/api/burger/" + id, {
        type: "PUT",
        data: devouredBurger
      }).then(function() {
          console.log("burger devoured");
          location.reload();
        }
      );
    });
  });
</script>
